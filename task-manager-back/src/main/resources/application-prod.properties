# Activate with SPRING_PROFILES_ACTIVE=prod

# ======= JPA / Hibernate =======
spring.jpa.show-sql=false
spring.jpa.hibernate.ddl-auto=update   # ('validate' later)
spring.jpa.open-in-view=false

# ======= Datasource (NO DEFAULTS, env-only) =======
spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# ======= Server / Proxy =======
server.forward-headers-strategy=framework
server.compression.enabled=true

# ======= Upload limits =======
spring.servlet.multipart.max-file-size=5MB
spring.servlet.multipart.max-request-size=10MB

# ======= App =======
app.retention-days=${APP_RETENTION_DAYS:90}
app.upload-dir=${APP_UPLOAD_DIR:/app/uploads}

# ======= CORS =======
app.cors.allowed-origins=${CORS_ALLOWED_ORIGINS}
app.cors.allowed-methods=${CORS_ALLOWED_METHODS:GET,POST,PUT,PATCH,DELETE,OPTIONS}
app.cors.allowed-headers=${CORS_ALLOWED_HEADERS:*}

# ======= Actuator =======
management.endpoints.web.exposure.include=health,info
management.endpoint.health.probes.enabled=true
