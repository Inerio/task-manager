<div class="task-kanbanColumn">
  <div class="task-dropzone-column">
    <!-- Empty column -->
    @if (filteredTasks().length === 0) {
    <button type="button" (click)="openForm()" class="add-btn">
      + Add task
    </button>
    @if (showForm()) {
    <div
      class="task-form-wrapper"
      (mousedown)="$event.stopPropagation()"
      (click)="$event.stopPropagation()"
    >
      <app-task-form
        [task]="{ kanbanColumnId: kanbanColumnId, title: '' }"
        (save)="handleTaskFormSave($event)"
        (cancel)="handleTaskFormCancel()"
      ></app-task-form>
    </div>
    } @if (hasAnyTask) {
    <div
      class="task-dropzone"
      [class.drag-over]="dropzoneDragOver()"
      (dragover)="onDropzoneDragOver($event)"
      (dragleave)="onDropzoneDragLeave()"
      (drop)="onDropzoneDrop($event)"
      aria-dropeffect="move"
    >
      <span>Drop a task here</span>
    </div>
    } } @for (task of filteredTasks(); track trackById($index, task); let idx =
    $index) {
    <app-task
      [task]="task"
      (taskDropped)="onTaskItemDrop($event, idx)"
    ></app-task>
    } @if (filteredTasks().length > 0) {
    <button type="button" (click)="openForm()" class="add-btn">
      + Add task
    </button>
    @if (showForm()) {
    <div
      class="task-form-wrapper"
      (mousedown)="$event.stopPropagation()"
      (click)="$event.stopPropagation()"
    >
      <app-task-form
        [task]="{ kanbanColumnId: kanbanColumnId, title: '' }"
        (save)="handleTaskFormSave($event)"
        (cancel)="handleTaskFormCancel()"
      ></app-task-form>
    </div>
    } }
  </div>
</div>
