/* =========================================================
   SHARED
   - Buttons (.btn) + variants
   - Round icon buttons (.icon-btn)
   - Form fields (.form-control)
   - Simple badges/labels (.chip)
   - Compatibility: keep .btn-success/.btn-secondary and
                    .styled-trash-btn/.styled-x-btn
   ========================================================= */

@use "../../../styles/_mixins" as mx;

/* ---------- Buttons ---------- */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.44rem 0.8rem;
  border: 0;
  border-radius: var(--radius-1);
  font: 500 1rem/1 var(--font-sans);
  cursor: pointer;
  box-shadow: 0 1px 2px #0001;
  transition: background 0.18s, color 0.18s, opacity 0.12s, transform 0.06s;

  &:active {
    transform: translateY(1px);
  }
  &:focus-visible {
    /* AA focus ring, consistent across themes */
    @include mx.focus-ring;
  }
  &:disabled,
  &[aria-disabled="true"] {
    opacity: 0.6;
    pointer-events: none;
    cursor: not-allowed;
  }
}

.btn--primary {
  background: var(--brand);
  color: #fff;

  &:hover {
    background: color-mix(in oklab, var(--brand) 88%, #000);
  }
}

.btn--success {
  background: var(--success);
  color: #fff;

  &:hover {
    background: color-mix(in oklab, var(--success) 82%, #000);
  }
}

.btn--secondary {
  background: #dadada;
  color: #333;

  &:hover {
    background: #bbb;
  }
}

.btn--danger {
  background: var(--danger);
  color: #fff;

  &:hover {
    background: color-mix(in oklab, var(--danger) 85%, #000);
  }
}

/* Button group */
.btn-group {
  display: flex;
  gap: 0.5rem;
}

/* ---------- Compatibility for existing buttons ---------- */
/* Keep legacy classes without touching templates */
.btn.btn--success,
.btn-success {
  background: var(--success);
  color: #fff;
}
.btn.btn--secondary,
.btn-secondary {
  background: #dadada;
  color: #333;
}
.btn.btn--success:hover,
.btn-success:hover {
  background: color-mix(in oklab, var(--success) 82%, #000);
}
.btn.btn--secondary:hover,
.btn-secondary:hover {
  background: #bbb;
}

/* ---------- Round icon buttons ---------- */
.icon-btn,
.styled-trash-btn, /* compat */
.styled-x-btn      /* compat */ {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: 0;
  background: var(--surface-2);
  color: inherit;
  border-radius: 50%;
  box-shadow: var(--shadow-1);
  cursor: pointer;
  transition: background 0.18s, box-shadow 0.18s, transform 0.06s;
  padding: 0;

  &:hover {
    background: color-mix(in oklab, var(--brand) 10%, var(--surface-2));
    box-shadow: 0 0 0 3px color-mix(in oklab, var(--brand) 20%, transparent);
  }
  &:active {
    transform: translateY(1px);
  }
  &:focus-visible {
    @include mx.focus-ring;
  }
  &[disabled],
  &[aria-disabled="true"] {
    opacity: 0.6;
    pointer-events: none;
    cursor: not-allowed;
  }

  /* SVGs inherit the text color */
  svg {
    stroke: currentColor;
    fill: none;
  }
}

/* Sizes */
.icon-btn--sm,
.styled-x-btn {
  width: 32px;
  height: 32px;
}
.icon-btn--md,
.styled-trash-btn {
  width: 36px;
  height: 36px;
}

/* ---------- Special label already used ---------- */
.delete-all-label {
  color: var(--danger);
  margin-left: 0.5em;
  font: 600 1rem/1.15 var(--font-sans);
  letter-spacing: 0.01em;
  user-select: none;
  pointer-events: none;
}

/* ---------- Form fields ---------- */
.form-control {
  width: 100%;
  font: 400 0.99rem/1.35 var(--font-sans);
  padding: 0.44rem 0.7rem;
  border-radius: var(--radius-1);
  border: 1.8px solid #bfc2ce;
  background: var(--surface-1);
  margin-bottom: 0.46rem;
  outline: none;
  transition: border 0.18s, box-shadow 0.18s;

  &:focus {
    border-color: var(--brand);
    box-shadow: 0 0 0 2px color-mix(in oklab, var(--brand) 35%, transparent);
  }
  &:focus-visible {
    @include mx.focus-ring;
  }
  &::placeholder {
    color: color-mix(in oklab, var(--text-2) 70%, #0000);
  }
  &:disabled,
  &[aria-disabled="true"] {
    background: var(--surface-2);
    color: color-mix(in oklab, var(--text-2) 70%, #0000);
    cursor: not-allowed;
  }
}

/* Only textareas should be resizable */
.form-control.textarea {
  min-height: 54px;
  max-height: 180px;
  resize: vertical;
}

/* ---------- Simple badges/labels ---------- */
.chip {
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
  padding: 0.18rem 0.6rem;
  border-radius: var(--radius-round);
  background: var(--surface-2);
  border: 1px solid var(--border-2);
  font: 500 0.9rem/1.2 var(--font-sans);
}

/* ---------- Utilities ---------- */
.visually-hidden {
  position: absolute !important;
  width: 1px;
  height: 1px;
  margin: -1px;
  padding: 0;
  border: 0;
  clip: rect(0 0 0 0);
  overflow: hidden;
  white-space: nowrap;
}
